namespace = GOT_CLEANUP

# Decision: Personal Reflection - Cleanup
country_event = {
	id = GOT_CLEANUP.1
	title = "GOT_CLEANUP.1.title"
	desc = "GOT_CLEANUP.1.desc"
	picture = BAD_WITH_MONARCH_eventPicture
	
	hidden = yes
	
	trigger = {
		had_country_flag = {
			flag = reflected_on_life
			days = 3650
		}
	}
	
	option = {
		name = "GOT_CLEANUP.1.option.1"
		
		clr_country_flag = reflected_on_life
	}
}

# Switch released monarchies of Westerosi people to Noble Houses
country_event = {
	id = GOT_CLEANUP.2
	title = "GOT_CLEANUP.2.title"
	desc = "GOT_CLEANUP.2.desc"
	picture = BAD_WITH_MONARCH_eventPicture
	
	hidden = yes
	
	trigger = {
		has_reform = kingdom_reform
        culture_group = culture_westeros
	}
	
	option = {
		name = "GOT_CLEANUP.2.option.1"
		
		change_government = monarchy
        add_government_reform = noble_house_reform
	}
}

# Cleanup Capital movement due to random Estate placement
# 	Perhaps manually place estates to remove need for this event
country_event = {
	id = GOT_CLEANUP.3
	title = "GOT_CLEANUP.3.title"
	desc = "GOT_CLEANUP.3.desc"
	picture = BAD_WITH_MONARCH_eventPicture
	
	hidden = yes
	trigger = {
		has_dlc = "The Cossacks"
		NOT = { has_country_flag = estate_fix }
	}
	
	immediate = {
		set_country_flag = estate_fix
	}
	
	option = {
		name = "GOT_CLEANUP.3.option.1"
		
		# Stark
		if = {
			limit = {
				tag = A01
				capital_scope = {
					NOT = { province_id = 47 }
				}
			}
			47 = {
				remove_estate = estate_nobles
				remove_estate = estate_clergy
				remove_estate = estate_merchants
				remove_estate = estate_commoners
			}
			
			set_capital = 47
		}
		
		# Tully
		if = {
			limit = {
				tag = A03
				capital_scope = {
					NOT = { province_id = 101 }
				}
			}
			101 = {
				remove_estate = estate_nobles
				remove_estate = estate_clergy
				remove_estate = estate_merchants
				remove_estate = estate_commoners
			}
			
			set_capital = 101
		}
		
		# Arryn
		if = {
			limit = {
				tag = A04
				capital_scope = {
					NOT = { province_id = 136 }
				}
			}
			136 = {
				remove_estate = estate_nobles
				remove_estate = estate_clergy
				remove_estate = estate_merchants
				remove_estate = estate_commoners
			}
			
			set_capital = 136
		}
		
		# Lannister
		if = {
			limit = {
				tag = A06
				capital_scope = {
					NOT = { province_id = 182 }
				}
			}
			182 = {
				remove_estate = estate_nobles
				remove_estate = estate_clergy
				remove_estate = estate_merchants
				remove_estate = estate_commoners
			}
			
			set_capital = 182
		}
		
		# Baratheon
		if = {
			limit = {
				tag = A07
				capital_scope = {
					NOT = { province_id = 304 }
				}
			}
			304 = {
				remove_estate = estate_nobles
				remove_estate = estate_clergy
				remove_estate = estate_merchants
				remove_estate = estate_commoners
			}
			
			set_capital = 304
		}
		
		# Martell
		if = {
			limit = {
				tag = A09
				capital_scope = {
					NOT = { province_id = 352 }
				}
			}
			352 = {
				remove_estate = estate_nobles
				remove_estate = estate_clergy
				remove_estate = estate_merchants
				remove_estate = estate_commoners
			}
			
			set_capital = 352
		}
		
		# Targaryen
		if = {
			limit = {
				tag = A10
				capital_scope = {
					NOT = { province_id = 226 }
				}
			}
			226 = {
				remove_estate = estate_nobles
				remove_estate = estate_clergy
				remove_estate = estate_merchants
				remove_estate = estate_commoners
			}
			
			set_capital = 226
		}
		
		# Tyrell
		if = {
			limit = {
				tag = F20
				capital_scope = {
					NOT = { province_id = 267 }
				}
			}
			267 = {
				remove_estate = estate_nobles
				remove_estate = estate_clergy
				remove_estate = estate_merchants
				remove_estate = estate_commoners
			}
			
			set_capital = 267
		}
		
		# Greyjoy
		if = {
			limit = {
				tag = M09
				capital_scope = {
					NOT = { province_id = 162 }
				}
			}
			162 = {
				remove_estate = estate_nobles
				remove_estate = estate_clergy
				remove_estate = estate_merchants
				remove_estate = estate_commoners
			}
			
			set_capital = 162
		}
		
		# Tyrosh
		if = {
			limit = {
				tag = X01
				capital_scope = {
					NOT = { province_id = 367 }
				}
			}
			367 = {
				remove_estate = estate_nobles
				remove_estate = estate_clergy
				remove_estate = estate_merchants
				remove_estate = estate_commoners
			}
			
			set_capital = 367
		}
		
		# Lys
		if = {
			limit = {
				tag = X06
				capital_scope = {
					NOT = { province_id = 368 }
				}
			}
			368 = {
				remove_estate = estate_nobles
				remove_estate = estate_clergy
				remove_estate = estate_merchants
				remove_estate = estate_commoners
			}
			
			set_capital = 368
		}
		
		# Myr
		if = {
			limit = {
				tag = U01
				capital_scope = {
					NOT = { province_id = 378 }
				}
			}
			378 = {
				remove_estate = estate_nobles
				remove_estate = estate_clergy
				remove_estate = estate_merchants
				remove_estate = estate_commoners
			}
			
			set_capital = 378
		}
		
		# Pentos
		if = {
			limit = {
				tag = U12
				capital_scope = {
					NOT = { province_id = 406 }
				}
			}
			406 = {
				remove_estate = estate_nobles
				remove_estate = estate_clergy
				remove_estate = estate_merchants
				remove_estate = estate_commoners
			}
			
			set_capital = 406
		}
		
		# Braavos
		if = {
			limit = {
				tag = U25
				capital_scope = {
					NOT = { province_id = 470 }
				}
			}
			470 = {
				remove_estate = estate_nobles
				remove_estate = estate_clergy
				remove_estate = estate_merchants
				remove_estate = estate_commoners
			}
			
			set_capital = 470
		}
		
		# Lorath
		if = {
			limit = {
				tag = U38
				capital_scope = {
					NOT = { province_id = 471 }
				}
			}
			471 = {
				remove_estate = estate_nobles
				remove_estate = estate_clergy
				remove_estate = estate_merchants
				remove_estate = estate_commoners
			}
			
			set_capital = 471
		}
		
		# Norvos
		if = {
			limit = {
				tag = U44
				capital_scope = {
					NOT = { province_id = 433 }
				}
			}
			433 = {
				remove_estate = estate_nobles
				remove_estate = estate_clergy
				remove_estate = estate_merchants
				remove_estate = estate_commoners
			}
			
			set_capital = 433
		}
		
		# Qohor
		if = {
			limit = {
				tag = U72
				capital_scope = {
					NOT = { province_id = 476 }
				}
			}
			476 = {
				remove_estate = estate_nobles
				remove_estate = estate_clergy
				remove_estate = estate_merchants
				remove_estate = estate_commoners
			}
			
			set_capital = 476
		}
	}
}
